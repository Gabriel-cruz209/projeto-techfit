<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o F√≠sica e Treino Personalizado</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            display: flex;
            justify-content: flex-start; /* Alinhamento ao topo */
            align-items: center;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            padding: 40px 0;
            background-color: #f4f4f9;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
        }
        h1 {
            color: #007bff;
            margin-bottom: 30px;
            text-align: center;
        }
        h2 {
            color: #28a745;
            margin-top: 20px;
            margin-bottom: 15px;
            text-align: center;
        }
        /* Cont√™ineres de Gr√°fico e Planilha */
        #chart-container, .planilha-container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 800px;
            margin-bottom: 40px;
        }

        /* --- Estilos da Tabela de Treino --- */
        .planilha-treino {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .planilha-treino th, .planilha-treino td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }
        .planilha-treino th {
            background-color: #007bff;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .planilha-treino tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .planilha-treino td strong {
            font-weight: bold;
            color: #0056b3;
        }

        /* --- Estilos do Bot√£o de Check-in --- */
        .checkin-btn {
            background-color: #ffc107; /* Amarelo/Aten√ß√£o */
            color: #333;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s, opacity 0.3s;
        }
        .checkin-btn:hover:not(:disabled) {
            background-color: #e0a800;
        }

        /* Estilo para bot√£o CHECADO/COMPLETO */
        .checkin-btn:disabled, .checked-day {
            background-color: #28a745; /* Verde/Sucesso */
            color: white;
            cursor: default;
            opacity: 0.8;
        }
    </style>
</head>
<body onload="loadCheckInStatus()"> <h1>üìä Avalia√ß√£o F√≠sica e Treino Personalizado</h1>

    <div id="chart-container">
        <h2>Composi√ß√£o Corporal (Percentual do Peso Total)</h2>
        <canvas id="graficoAvaliacaoFisica"></canvas>
    </div>

    <div class="planilha-container">
        <h2>üèãÔ∏è Planilha de Treino Semanal</h2>
        
        <table class="planilha-treino">
            <thead>
                <tr>
                    <th>Dia</th>
                    <th>Grupo Muscular</th>
                    <th>Exerc√≠cio</th>
                    <th>S√©ries x Repeti√ß√µes</th>
                    <th>Intervalo</th>
                    <th>Check-in</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="3"><strong>Segunda</strong></td>
                    <td>Peito / Tr√≠ceps</td>
                    <td>Supino Reto com Halteres</td>
                    <td>4 x 8-12</td>
                    <td>90s</td>
                    <td rowspan="3">
                        <button class="checkin-btn" data-day-id="treino-segunda" onclick="checkIn(this)">
                            Fazer Check-in
                        </button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>Crucifixo Inclinado</td>
                    <td>3 x 10-15</td>
                    <td>60s</td>
                </tr>
                 <tr>
                    <td></td>
                    <td>Extens√£o de Tr√≠ceps na Corda</td>
                    <td>4 x 12-15</td>
                    <td>60s</td>
                </tr>

                <tr>
                    <td rowspan="3"><strong>Ter√ßa</strong></td>
                    <td>Costas / B√≠ceps</td>
                    <td>Puxada Alta (Lat Pulldown)</td>
                    <td>4 x 10-12</td>
                    <td>90s</td>
                    <td rowspan="3">
                        <button class="checkin-btn" data-day-id="treino-terca" onclick="checkIn(this)">
                            Fazer Check-in
                        </button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>Remada Curvada com Barra</td>
                    <td>3 x 8-10</td>
                    <td>90s</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Rosca Direta com Barra</td>
                    <td>3 x 10-12</td>
                    <td>60s</td>
                </tr>

                <tr>
                    <td rowspan="2"><strong>Quarta</strong></td>
                    <td>Pernas / Ombros</td>
                    <td>Agachamento Livre</td>
                    <td>5 x 6-10</td>
                    <td>120s</td>
                    <td rowspan="2">
                        <button class="checkin-btn" data-day-id="treino-quarta" onclick="checkIn(this)">
                            Fazer Check-in
                        </button>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>Desenvolvimento Militar (Sentado)</td>
                    <td>4 x 8-12</td>
                    <td>90s</td>
                </tr>
                <tr>
                    <td colspan="6" style="background-color: #e9ecef;">
                        <strong>Recomenda√ß√£o:</strong> Descanse na Quinta-feira ou fa√ßa 30 minutos de Cardio Leve.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <script>
        // --- L√ìGICA DO GR√ÅFICO (Permanecendo a mesma) ---
        const dadosAvaliacao = {
            labels: [
                'Massa Muscular (45%)',
                'Gordura Corporal (18%)',
                'Massa √ìssea e Residual (37%)'
            ],
            datasets: [{
                label: 'Composi√ß√£o Corporal (%)',
                data: [45, 18, 37],
                backgroundColor: [
                    'rgba(40, 167, 69, 0.8)',
                    'rgba(220, 53, 69, 0.8)',
                    'rgba(108, 117, 125, 0.8)'
                ],
                borderColor: [
                    'rgba(40, 167, 69, 1)',
                    'rgba(220, 53, 69, 1)',
                    'rgba(108, 117, 125, 1)'
                ],
                borderWidth: 1.5,
                hoverOffset: 15
            }]
        };

        const configuracao = {
            type: 'pie',
            data: dadosAvaliacao,
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'right' },
                    title: {
                        display: true,
                        text: 'Percentual de Componentes Corporais',
                        font: { size: 22, weight: 'bold' }
                    },
                    tooltip: {
                        callbacks: {
                            label: (context) => {
                                let label = context.label || '';
                                if (context.parsed !== null) {
                                    label += `: ${context.parsed}%`;
                                }
                                return label;
                            }
                        }
                    }
                }
            },
        };

        const ctx = document.getElementById('graficoAvaliacaoFisica').getContext('2d');
        const meuGrafico = new Chart(ctx, configuracao);

        // --- L√ìGICA DO CHECK-IN ---

        /**
         * Manipula o clique do bot√£o de check-in, salva o estado e atualiza o bot√£o.
         * @param {HTMLElement} buttonElement - O bot√£o que foi clicado.
         */
        function checkIn(buttonElement) {
            const dayId = buttonElement.getAttribute('data-day-id');
            const today = new Date().toDateString(); // Usa a data atual para garantir que o check-in √© di√°rio

            // 1. Salva o estado no localStorage
            localStorage.setItem(dayId, today);
            
            // 2. Atualiza a apar√™ncia do bot√£o
            updateButtonStatus(buttonElement, today);

            alert(`Check-in para ${dayId.replace('treino-', '')} realizado com sucesso em ${today}!`);
        }

        /**
         * Atualiza a apar√™ncia de um √∫nico bot√£o.
         * @param {HTMLElement} button - O bot√£o a ser atualizado.
         * @param {string} date - A data registrada no localStorage.
         */
        function updateButtonStatus(button, date) {
            const today = new Date().toDateString();

            // Verifica se o check-in foi feito HOJE.
            if (date === today) {
                button.textContent = 'Treino Conclu√≠do!';
                button.disabled = true;
                button.classList.add('checked-day');
            } else if (date) {
                 // Se o check-in n√£o foi hoje, mas existe, reinicia o bot√£o (para um novo dia)
                button.textContent = 'Fazer Check-in';
                button.disabled = false;
                button.classList.remove('checked-day');
                
                // Opcional: Limpar o localStorage se o dia n√£o for hoje
                // localStorage.removeItem(button.getAttribute('data-day-id'));
            }
        }

        /**
         * Carrega o status de check-in de todos os bot√µes ao carregar a p√°gina.
         */
        function loadCheckInStatus() {
            const checkinButtons = document.querySelectorAll('.checkin-btn');
            
            checkinButtons.forEach(button => {
                const dayId = button.getAttribute('data-day-id');
                const lastCheckInDate = localStorage.getItem(dayId);

                if (lastCheckInDate) {
                    updateButtonStatus(button, lastCheckInDate);
                }
            });
        }
    </script>

</body>
</html>